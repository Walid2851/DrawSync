{"ast":null,"code":"import io from 'socket.io-client';\nclass SocketManager {\n  constructor() {\n    this.socket = null;\n    this.isConnected = false;\n    this.eventListeners = new Map();\n  }\n  connect(token) {\n    if (this.socket && this.isConnected) {\n      return;\n    }\n    this.socket = io('http://localhost:8001', {\n      transports: ['websocket', 'polling']\n    });\n    this.socket.on('connect', () => {\n      console.log('Connected to socket server');\n      this.isConnected = true;\n\n      // Authenticate after connection\n      if (token) {\n        this.socket.emit('authenticate', {\n          token\n        });\n      }\n    });\n    this.socket.on('disconnect', () => {\n      console.log('Disconnected from socket server');\n      this.isConnected = false;\n    });\n    this.socket.on('error', error => {\n      console.error('Socket error:', error);\n    });\n\n    // Set up event listeners\n    this.setupEventListeners();\n  }\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n      this.isConnected = false;\n    }\n  }\n  setupEventListeners() {\n    // Authentication events\n    this.socket.on('authenticated', data => {\n      this.emit('authenticated', data);\n    });\n\n    // Room events\n    this.socket.on('room_joined', data => {\n      this.emit('room_joined', data);\n    });\n    this.socket.on('player_joined', data => {\n      this.emit('player_joined', data);\n    });\n    this.socket.on('player_left', data => {\n      this.emit('player_left', data);\n    });\n    this.socket.on('player_disconnected', data => {\n      this.emit('player_disconnected', data);\n    });\n\n    // Game events\n    this.socket.on('draw_data', data => {\n      this.emit('draw_data', data);\n    });\n    this.socket.on('chat_message', data => {\n      this.emit('chat_message', data);\n    });\n    this.socket.on('guess_result', data => {\n      this.emit('guess_result', data);\n    });\n    this.socket.on('word_guessed', data => {\n      this.emit('word_guessed', data);\n    });\n    this.socket.on('player_ready', data => {\n      this.emit('player_ready', data);\n    });\n    this.socket.on('game_started', data => {\n      this.emit('game_started', data);\n    });\n    this.socket.on('round_started', data => {\n      this.emit('round_started', data);\n    });\n    this.socket.on('round_ended', data => {\n      this.emit('round_ended', data);\n    });\n    this.socket.on('game_ended', data => {\n      this.emit('game_ended', data);\n    });\n  }\n\n  // Event listener management\n  on(event, callback) {\n    if (!this.eventListeners.has(event)) {\n      this.eventListeners.set(event, []);\n    }\n    this.eventListeners.get(event).push(callback);\n  }\n  off(event, callback) {\n    if (this.eventListeners.has(event)) {\n      const listeners = this.eventListeners.get(event);\n      const index = listeners.indexOf(callback);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    }\n  }\n  emit(event, data) {\n    if (this.eventListeners.has(event)) {\n      this.eventListeners.get(event).forEach(callback => {\n        callback(data);\n      });\n    }\n  }\n\n  // Socket event emitters\n  joinRoom(roomId) {\n    if (this.socket && this.isConnected) {\n      this.socket.emit('join_room', {\n        room_id: roomId\n      });\n    }\n  }\n  leaveRoom() {\n    if (this.socket && this.isConnected) {\n      this.socket.emit('leave_room');\n    }\n  }\n  sendDrawData(drawData) {\n    if (this.socket && this.isConnected) {\n      this.socket.emit('draw', drawData);\n    }\n  }\n  sendChatMessage(message) {\n    if (this.socket && this.isConnected) {\n      console.log('Sending chat message:', message);\n      this.socket.emit('chat_message', message);\n    } else {\n      console.error('Socket not connected or not available');\n    }\n  }\n  sendGuess(guess) {\n    if (this.socket && this.isConnected) {\n      this.socket.emit('guess_word', guess);\n    }\n  }\n  setReady(ready) {\n    if (this.socket && this.isConnected) {\n      this.socket.emit('ready', {\n        ready\n      });\n    }\n  }\n}\n\n// Create singleton instance\nconst socketManager = new SocketManager();\nexport default socketManager;","map":{"version":3,"names":["io","SocketManager","constructor","socket","isConnected","eventListeners","Map","connect","token","transports","on","console","log","emit","error","setupEventListeners","disconnect","data","event","callback","has","set","get","push","off","listeners","index","indexOf","splice","forEach","joinRoom","roomId","room_id","leaveRoom","sendDrawData","drawData","sendChatMessage","message","sendGuess","guess","setReady","ready","socketManager"],"sources":["/Users/walid/Documents/Networking/drawsync/frontend/src/utils/socket.js"],"sourcesContent":["import io from 'socket.io-client';\n\nclass SocketManager {\n  constructor() {\n    this.socket = null;\n    this.isConnected = false;\n    this.eventListeners = new Map();\n  }\n\n  connect(token) {\n    if (this.socket && this.isConnected) {\n      return;\n    }\n\n    this.socket = io('http://localhost:8001', {\n      transports: ['websocket', 'polling']\n    });\n\n    this.socket.on('connect', () => {\n      console.log('Connected to socket server');\n      this.isConnected = true;\n      \n      // Authenticate after connection\n      if (token) {\n        this.socket.emit('authenticate', { token });\n      }\n    });\n\n    this.socket.on('disconnect', () => {\n      console.log('Disconnected from socket server');\n      this.isConnected = false;\n    });\n\n    this.socket.on('error', (error) => {\n      console.error('Socket error:', error);\n    });\n\n    // Set up event listeners\n    this.setupEventListeners();\n  }\n\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n      this.isConnected = false;\n    }\n  }\n\n  setupEventListeners() {\n    // Authentication events\n    this.socket.on('authenticated', (data) => {\n      this.emit('authenticated', data);\n    });\n\n    // Room events\n    this.socket.on('room_joined', (data) => {\n      this.emit('room_joined', data);\n    });\n\n    this.socket.on('player_joined', (data) => {\n      this.emit('player_joined', data);\n    });\n\n    this.socket.on('player_left', (data) => {\n      this.emit('player_left', data);\n    });\n\n    this.socket.on('player_disconnected', (data) => {\n      this.emit('player_disconnected', data);\n    });\n\n    // Game events\n    this.socket.on('draw_data', (data) => {\n      this.emit('draw_data', data);\n    });\n\n    this.socket.on('chat_message', (data) => {\n      this.emit('chat_message', data);\n    });\n\n    this.socket.on('guess_result', (data) => {\n      this.emit('guess_result', data);\n    });\n\n    this.socket.on('word_guessed', (data) => {\n      this.emit('word_guessed', data);\n    });\n\n    this.socket.on('player_ready', (data) => {\n      this.emit('player_ready', data);\n    });\n\n    this.socket.on('game_started', (data) => {\n      this.emit('game_started', data);\n    });\n\n    this.socket.on('round_started', (data) => {\n      this.emit('round_started', data);\n    });\n\n    this.socket.on('round_ended', (data) => {\n      this.emit('round_ended', data);\n    });\n\n    this.socket.on('game_ended', (data) => {\n      this.emit('game_ended', data);\n    });\n  }\n\n  // Event listener management\n  on(event, callback) {\n    if (!this.eventListeners.has(event)) {\n      this.eventListeners.set(event, []);\n    }\n    this.eventListeners.get(event).push(callback);\n  }\n\n  off(event, callback) {\n    if (this.eventListeners.has(event)) {\n      const listeners = this.eventListeners.get(event);\n      const index = listeners.indexOf(callback);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    }\n  }\n\n  emit(event, data) {\n    if (this.eventListeners.has(event)) {\n      this.eventListeners.get(event).forEach(callback => {\n        callback(data);\n      });\n    }\n  }\n\n  // Socket event emitters\n  joinRoom(roomId) {\n    if (this.socket && this.isConnected) {\n      this.socket.emit('join_room', { room_id: roomId });\n    }\n  }\n\n  leaveRoom() {\n    if (this.socket && this.isConnected) {\n      this.socket.emit('leave_room');\n    }\n  }\n\n  sendDrawData(drawData) {\n    if (this.socket && this.isConnected) {\n      this.socket.emit('draw', drawData);\n    }\n  }\n\n  sendChatMessage(message) {\n    if (this.socket && this.isConnected) {\n      console.log('Sending chat message:', message);\n      this.socket.emit('chat_message', message);\n    } else {\n      console.error('Socket not connected or not available');\n    }\n  }\n\n  sendGuess(guess) {\n    if (this.socket && this.isConnected) {\n      this.socket.emit('guess_word', guess);\n    }\n  }\n\n  setReady(ready) {\n    if (this.socket && this.isConnected) {\n      this.socket.emit('ready', { ready });\n    }\n  }\n}\n\n// Create singleton instance\nconst socketManager = new SocketManager();\nexport default socketManager; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}