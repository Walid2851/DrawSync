{"ast":null,"code":"var _jsxFileName = \"/Users/walid/Documents/Networking/drawsync/frontend/src/pages/GameRoom.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useCallback, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport toast from 'react-hot-toast';\nimport DrawingCanvas from '../components/DrawingCanvas';\nimport ChatBox from '../components/ChatBox';\nimport Button from '../components/Button';\nimport useGameStore from '../store/gameStore';\nimport useAuthStore from '../store/authStore';\nimport socketManager from '../utils/socket';\nimport { roomsAPI } from '../utils/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GameRoom = () => {\n  _s();\n  const {\n    roomId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    token,\n    user\n  } = useAuthStore();\n  const {\n    players,\n    isInRoom,\n    isGameActive,\n    currentRound,\n    totalRounds,\n    timeRemaining,\n    currentWord,\n    isDrawing,\n    drawingData,\n    chatMessages,\n    guessInput,\n    isSocketConnected,\n    isLoading,\n    error,\n    joinRoom,\n    leaveRoom,\n    deleteRoom,\n    setPlayers,\n    addChatMessageFromSocket,\n    addCorrectGuessMessage,\n    setGuessInput,\n    sendGuess,\n    sendChatMessage,\n    startGame,\n    setReady,\n    skipTurn,\n    resetGameState,\n    handleSocketConnected,\n    handleAuthenticated,\n    handleRoomJoined,\n    handlePlayerJoined,\n    handlePlayerLeft,\n    handleGameStarted,\n    handleRoundStarted,\n    handleWordAssigned,\n    handleCorrectGuess,\n    handleRoundEnded,\n    handleGameEnded,\n    handleTimeUpdate,\n    handleCanvasCleared,\n    handleRoomDeleted,\n    handlePlayersUpdate\n  } = useGameStore();\n  const [isReady, setIsReady] = useState(false);\n\n  // Socket event handlers\n  const handleSocketConnectedEvent = useCallback(data => {\n    handleSocketConnected(data);\n  }, [handleSocketConnected]);\n  const handleAuthenticatedEvent = useCallback(data => {\n    handleAuthenticated(data);\n    // Join room after successful authentication\n    console.log('Authentication successful, joining room...');\n    joinRoom(parseInt(roomId));\n  }, [handleAuthenticated, joinRoom, roomId]);\n  const handleRoomJoinedEvent = useCallback(data => {\n    handleRoomJoined(data);\n    toast.success('Joined room successfully!');\n  }, [handleRoomJoined]);\n  const handlePlayerJoinedEvent = useCallback(data => {\n    handlePlayerJoined(data);\n    toast(`${data.username} joined the room`, {\n      icon: 'üë§'\n    });\n  }, [handlePlayerJoined]);\n  const handlePlayerLeftEvent = useCallback(data => {\n    handlePlayerLeft(data);\n    toast(`${data.username} left the room`, {\n      icon: 'üë§'\n    });\n  }, [handlePlayerLeft]);\n  const handleGameStartedEvent = useCallback(data => {\n    handleGameStarted(data);\n    toast.success('Game started!');\n  }, [handleGameStarted]);\n  const handleRoundStartedEvent = useCallback(data => {\n    handleRoundStarted(data);\n    toast.success(`Round ${data.round} started!`);\n  }, [handleRoundStarted]);\n  const handleWordAssignedEvent = useCallback(data => {\n    handleWordAssigned(data);\n    if (data.word && data.word !== '_' * data.word.length) {\n      toast.success(`Your word: ${data.word}`);\n    }\n  }, [handleWordAssigned]);\n  const handleCorrectGuessEvent = useCallback(data => {\n    handleCorrectGuess(data);\n    addCorrectGuessMessage(data);\n    toast.success(`${data.username} guessed correctly!`);\n  }, [handleCorrectGuess, addCorrectGuessMessage]);\n  const handleRoundEndedEvent = useCallback(data => {\n    handleRoundEnded(data);\n    toast(`Round ${data.round} ended! Word was: ${data.word}`, {\n      icon: '‚èπÔ∏è'\n    });\n  }, [handleRoundEnded]);\n  const handleGameEndedEvent = useCallback(data => {\n    handleGameEnded(data);\n    toast.success('Game ended!');\n  }, [handleGameEnded]);\n  const handleTimeUpdateEvent = useCallback(data => {\n    handleTimeUpdate(data);\n  }, [handleTimeUpdate]);\n  const handleCanvasClearedEvent = useCallback(data => {\n    handleCanvasCleared(data);\n    toast('Canvas cleared', {\n      icon: 'üßπ'\n    });\n  }, [handleCanvasCleared]);\n  const handleRoomDeletedEvent = useCallback(data => {\n    handleRoomDeleted(data);\n    toast.error('Room has been deleted');\n    navigate('/dashboard');\n  }, [handleRoomDeleted, navigate]);\n  const handlePlayersUpdateEvent = useCallback(data => {\n    handlePlayersUpdate(data);\n  }, [handlePlayersUpdate]);\n  const handleChatMessageEvent = useCallback(data => {\n    addChatMessageFromSocket(data);\n  }, [addChatMessageFromSocket]);\n  const handleDrawDataEvent = useCallback(data => {\n    // Drawing data is handled by the DrawingCanvas component\n    console.log('Draw data received:', data);\n  }, []);\n  const handleGameStateEvent = useCallback(data => {\n    // Game state updates are handled by the store\n    console.log('Game state update:', data);\n  }, []);\n\n  // Game controls\n  const handleStartGame = () => {\n    startGame();\n  };\n  const handleReadyToggle = () => {\n    const newReadyState = !isReady;\n    setIsReady(newReadyState);\n    setReady(newReadyState);\n  };\n  const handleSkipTurn = () => {\n    skipTurn();\n  };\n  const handleLeaveRoom = () => {\n    leaveRoom();\n    navigate('/dashboard');\n  };\n  const handleDeleteRoom = () => {\n    if (window.confirm('Are you sure you want to delete this room? All players will be disconnected.')) {\n      deleteRoom();\n      navigate('/dashboard');\n    }\n  };\n  const handleSendMessage = message => {\n    sendChatMessage(message);\n  };\n  const handleSendGuess = () => {\n    sendGuess();\n  };\n\n  // Check if current user is the drawer\n  const isCurrentDrawer = isDrawing;\n  useEffect(() => {\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n    console.log('GameRoom: Setting up socket connection...');\n\n    // Connect to socket\n    socketManager.connect(token);\n\n    // Register all event listeners\n    socketManager.on('socket_connected', handleSocketConnectedEvent);\n    socketManager.on('authenticated', handleAuthenticatedEvent);\n    socketManager.on('room_joined', handleRoomJoinedEvent);\n    socketManager.on('player_joined', handlePlayerJoinedEvent);\n    socketManager.on('player_left', handlePlayerLeftEvent);\n    socketManager.on('chat_message', handleChatMessageEvent);\n    socketManager.on('game_started', handleGameStartedEvent);\n    socketManager.on('round_started', handleRoundStartedEvent);\n    socketManager.on('correct_guess', handleCorrectGuessEvent);\n    socketManager.on('round_ended', handleRoundEndedEvent);\n    socketManager.on('game_ended', handleGameEndedEvent);\n    socketManager.on('time_update', handleTimeUpdateEvent);\n    socketManager.on('word_assigned', handleWordAssignedEvent);\n    socketManager.on('game_state', handleGameStateEvent);\n    socketManager.on('canvas_cleared', handleCanvasClearedEvent);\n    socketManager.on('draw_data', handleDrawDataEvent);\n    socketManager.on('room_deleted', handleRoomDeletedEvent);\n    socketManager.on('players_update', handlePlayersUpdateEvent);\n\n    // Initial fetch of players\n    const fetchPlayers = async () => {\n      try {\n        const response = await roomsAPI.getRoomPlayers(roomId);\n        if (response.data && response.data.players) {\n          setPlayers(response.data.players);\n        }\n      } catch (err) {\n        console.error('Failed to fetch players:', err);\n      }\n    };\n    fetchPlayers();\n\n    // Cleanup on unmount\n    return () => {\n      socketManager.off('socket_connected', handleSocketConnectedEvent);\n      socketManager.off('authenticated', handleAuthenticatedEvent);\n      socketManager.off('room_joined', handleRoomJoinedEvent);\n      socketManager.off('player_joined', handlePlayerJoinedEvent);\n      socketManager.off('player_left', handlePlayerLeftEvent);\n      socketManager.off('chat_message', handleChatMessageEvent);\n      socketManager.off('game_started', handleGameStartedEvent);\n      socketManager.off('round_started', handleRoundStartedEvent);\n      socketManager.off('correct_guess', handleCorrectGuessEvent);\n      socketManager.off('round_ended', handleRoundEndedEvent);\n      socketManager.off('game_ended', handleGameEndedEvent);\n      socketManager.off('time_update', handleTimeUpdateEvent);\n      socketManager.off('word_assigned', handleWordAssignedEvent);\n      socketManager.off('game_state', handleGameStateEvent);\n      socketManager.off('canvas_cleared', handleCanvasClearedEvent);\n      socketManager.off('draw_data', handleDrawDataEvent);\n      socketManager.off('room_deleted', handleRoomDeletedEvent);\n      socketManager.off('players_update', handlePlayersUpdateEvent);\n    };\n  }, [token, roomId, navigate, joinRoom, setPlayers, handleSocketConnectedEvent, handleAuthenticatedEvent, handleRoomJoinedEvent, handlePlayerJoinedEvent, handlePlayerLeftEvent, handleChatMessageEvent, handleGameStartedEvent, handleRoundStartedEvent, handleCorrectGuessEvent, handleRoundEndedEvent, handleGameEndedEvent, handleTimeUpdateEvent, handleWordAssignedEvent, handleGameStateEvent, handleCanvasClearedEvent, handleDrawDataEvent, handleRoomDeletedEvent, handlePlayersUpdateEvent]);\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xl\",\n        children: \"Loading room...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-500 text-xl\",\n        children: [\"Error: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-md p-4 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold text-gray-800\",\n              children: [\"Room \", roomId]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-4 text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Players: \", players.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Round: \", currentRound, \"/\", totalRounds]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this), isGameActive && /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Time: \", timeRemaining, \"s\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 34\n              }, this), isSocketConnected ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-500\",\n                children: \"\\u25CF Connected\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-red-500\",\n                children: \"\\u25CF Disconnected\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-2\",\n            children: [!isGameActive && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                onClick: handleReadyToggle,\n                variant: isReady ? 'success' : 'secondary',\n                children: isReady ? 'Ready' : 'Not Ready'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: handleStartGame,\n                variant: \"primary\",\n                children: \"Start Game\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true), isGameActive && isCurrentDrawer && /*#__PURE__*/_jsxDEV(Button, {\n              onClick: handleSkipTurn,\n              variant: \"warning\",\n              children: \"Skip Turn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: handleLeaveRoom,\n              variant: \"secondary\",\n              children: \"Leave Room\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: handleDeleteRoom,\n              variant: \"danger\",\n              children: \"Delete Room\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-4 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-md p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-semibold mb-4\",\n              children: \"Players\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: players.map((player, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between p-2 bg-gray-50 rounded\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: player.username\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 369,\n                    columnNumber: 23\n                  }, this), player.ready && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-green-500 text-sm\",\n                    children: \"\\u2713\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-600\",\n                  children: [player.score || 0, \" pts\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 21\n                }, this)]\n              }, `${player.id}-${index}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-md p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-lg font-semibold mb-2\",\n                children: \"Drawing Canvas\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 17\n              }, this), isGameActive && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-600 mb-2\",\n                children: isCurrentDrawer ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Your turn to draw! Word: \", currentWord]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 391,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Waiting for drawing... Word: \", currentWord]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(DrawingCanvas, {\n              width: 800,\n              height: 600\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-1\",\n          children: /*#__PURE__*/_jsxDEV(ChatBox, {\n            messages: chatMessages,\n            onSendMessage: handleSendMessage,\n            guessInput: guessInput,\n            onGuessInputChange: setGuessInput,\n            onSendGuess: handleSendGuess,\n            isGameActive: isGameActive\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 310,\n    columnNumber: 5\n  }, this);\n};\n_s(GameRoom, \"bU9eWNtyS2FBBPNInLftACgmimQ=\", false, function () {\n  return [useParams, useNavigate, useAuthStore, useGameStore];\n});\n_c = GameRoom;\nexport default GameRoom;\nvar _c;\n$RefreshReg$(_c, \"GameRoom\");","map":{"version":3,"names":["React","useEffect","useCallback","useState","useParams","useNavigate","toast","DrawingCanvas","ChatBox","Button","useGameStore","useAuthStore","socketManager","roomsAPI","jsxDEV","_jsxDEV","Fragment","_Fragment","GameRoom","_s","roomId","navigate","token","user","players","isInRoom","isGameActive","currentRound","totalRounds","timeRemaining","currentWord","isDrawing","drawingData","chatMessages","guessInput","isSocketConnected","isLoading","error","joinRoom","leaveRoom","deleteRoom","setPlayers","addChatMessageFromSocket","addCorrectGuessMessage","setGuessInput","sendGuess","sendChatMessage","startGame","setReady","skipTurn","resetGameState","handleSocketConnected","handleAuthenticated","handleRoomJoined","handlePlayerJoined","handlePlayerLeft","handleGameStarted","handleRoundStarted","handleWordAssigned","handleCorrectGuess","handleRoundEnded","handleGameEnded","handleTimeUpdate","handleCanvasCleared","handleRoomDeleted","handlePlayersUpdate","isReady","setIsReady","handleSocketConnectedEvent","data","handleAuthenticatedEvent","console","log","parseInt","handleRoomJoinedEvent","success","handlePlayerJoinedEvent","username","icon","handlePlayerLeftEvent","handleGameStartedEvent","handleRoundStartedEvent","round","handleWordAssignedEvent","word","length","handleCorrectGuessEvent","handleRoundEndedEvent","handleGameEndedEvent","handleTimeUpdateEvent","handleCanvasClearedEvent","handleRoomDeletedEvent","handlePlayersUpdateEvent","handleChatMessageEvent","handleDrawDataEvent","handleGameStateEvent","handleStartGame","handleReadyToggle","newReadyState","handleSkipTurn","handleLeaveRoom","handleDeleteRoom","window","confirm","handleSendMessage","message","handleSendGuess","isCurrentDrawer","connect","on","fetchPlayers","response","getRoomPlayers","err","off","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","variant","map","player","index","ready","score","id","width","height","messages","onSendMessage","onGuessInputChange","onSendGuess","_c","$RefreshReg$"],"sources":["/Users/walid/Documents/Networking/drawsync/frontend/src/pages/GameRoom.jsx"],"sourcesContent":["import React, { useEffect, useCallback, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport toast from 'react-hot-toast';\nimport DrawingCanvas from '../components/DrawingCanvas';\nimport ChatBox from '../components/ChatBox';\nimport Button from '../components/Button';\nimport useGameStore from '../store/gameStore';\nimport useAuthStore from '../store/authStore';\nimport socketManager from '../utils/socket';\nimport { roomsAPI } from '../utils/api';\n\nconst GameRoom = () => {\n  const { roomId } = useParams();\n  const navigate = useNavigate();\n  const { token, user } = useAuthStore();\n  const {\n    players,\n    isInRoom,\n    isGameActive,\n    currentRound,\n    totalRounds,\n    timeRemaining,\n    currentWord,\n    isDrawing,\n    drawingData,\n    chatMessages,\n    guessInput,\n    isSocketConnected,\n    isLoading,\n    error,\n    joinRoom,\n    leaveRoom,\n    deleteRoom,\n    setPlayers,\n    addChatMessageFromSocket,\n    addCorrectGuessMessage,\n    setGuessInput,\n    sendGuess,\n    sendChatMessage,\n    startGame,\n    setReady,\n    skipTurn,\n    resetGameState,\n    handleSocketConnected,\n    handleAuthenticated,\n    handleRoomJoined,\n    handlePlayerJoined,\n    handlePlayerLeft,\n    handleGameStarted,\n    handleRoundStarted,\n    handleWordAssigned,\n    handleCorrectGuess,\n    handleRoundEnded,\n    handleGameEnded,\n    handleTimeUpdate,\n    handleCanvasCleared,\n    handleRoomDeleted,\n    handlePlayersUpdate,\n  } = useGameStore();\n\n  const [isReady, setIsReady] = useState(false);\n\n  // Socket event handlers\n  const handleSocketConnectedEvent = useCallback((data) => {\n    handleSocketConnected(data);\n  }, [handleSocketConnected]);\n\n  const handleAuthenticatedEvent = useCallback((data) => {\n    handleAuthenticated(data);\n    // Join room after successful authentication\n    console.log('Authentication successful, joining room...');\n    joinRoom(parseInt(roomId));\n  }, [handleAuthenticated, joinRoom, roomId]);\n\n  const handleRoomJoinedEvent = useCallback((data) => {\n    handleRoomJoined(data);\n    toast.success('Joined room successfully!');\n  }, [handleRoomJoined]);\n\n  const handlePlayerJoinedEvent = useCallback((data) => {\n    handlePlayerJoined(data);\n    toast(`${data.username} joined the room`, {\n      icon: 'üë§',\n    });\n  }, [handlePlayerJoined]);\n\n  const handlePlayerLeftEvent = useCallback((data) => {\n    handlePlayerLeft(data);\n    toast(`${data.username} left the room`, {\n      icon: 'üë§',\n    });\n  }, [handlePlayerLeft]);\n\n  const handleGameStartedEvent = useCallback((data) => {\n    handleGameStarted(data);\n    toast.success('Game started!');\n  }, [handleGameStarted]);\n\n  const handleRoundStartedEvent = useCallback((data) => {\n    handleRoundStarted(data);\n    toast.success(`Round ${data.round} started!`);\n  }, [handleRoundStarted]);\n\n  const handleWordAssignedEvent = useCallback((data) => {\n    handleWordAssigned(data);\n    if (data.word && data.word !== '_' * data.word.length) {\n      toast.success(`Your word: ${data.word}`);\n    }\n  }, [handleWordAssigned]);\n\n  const handleCorrectGuessEvent = useCallback((data) => {\n    handleCorrectGuess(data);\n    addCorrectGuessMessage(data);\n    toast.success(`${data.username} guessed correctly!`);\n  }, [handleCorrectGuess, addCorrectGuessMessage]);\n\n  const handleRoundEndedEvent = useCallback((data) => {\n    handleRoundEnded(data);\n    toast(`Round ${data.round} ended! Word was: ${data.word}`, {\n      icon: '‚èπÔ∏è',\n    });\n  }, [handleRoundEnded]);\n\n  const handleGameEndedEvent = useCallback((data) => {\n    handleGameEnded(data);\n    toast.success('Game ended!');\n  }, [handleGameEnded]);\n\n  const handleTimeUpdateEvent = useCallback((data) => {\n    handleTimeUpdate(data);\n  }, [handleTimeUpdate]);\n\n  const handleCanvasClearedEvent = useCallback((data) => {\n    handleCanvasCleared(data);\n    toast('Canvas cleared', {\n      icon: 'üßπ',\n    });\n  }, [handleCanvasCleared]);\n\n  const handleRoomDeletedEvent = useCallback((data) => {\n    handleRoomDeleted(data);\n    toast.error('Room has been deleted');\n    navigate('/dashboard');\n  }, [handleRoomDeleted, navigate]);\n\n  const handlePlayersUpdateEvent = useCallback((data) => {\n    handlePlayersUpdate(data);\n  }, [handlePlayersUpdate]);\n\n  const handleChatMessageEvent = useCallback((data) => {\n    addChatMessageFromSocket(data);\n  }, [addChatMessageFromSocket]);\n\n  const handleDrawDataEvent = useCallback((data) => {\n    // Drawing data is handled by the DrawingCanvas component\n    console.log('Draw data received:', data);\n  }, []);\n\n  const handleGameStateEvent = useCallback((data) => {\n    // Game state updates are handled by the store\n    console.log('Game state update:', data);\n  }, []);\n\n  // Game controls\n  const handleStartGame = () => {\n    startGame();\n  };\n\n  const handleReadyToggle = () => {\n    const newReadyState = !isReady;\n    setIsReady(newReadyState);\n    setReady(newReadyState);\n  };\n\n  const handleSkipTurn = () => {\n    skipTurn();\n  };\n\n  const handleLeaveRoom = () => {\n    leaveRoom();\n    navigate('/dashboard');\n  };\n\n  const handleDeleteRoom = () => {\n    if (window.confirm('Are you sure you want to delete this room? All players will be disconnected.')) {\n      deleteRoom();\n      navigate('/dashboard');\n    }\n  };\n\n  const handleSendMessage = (message) => {\n    sendChatMessage(message);\n  };\n\n  const handleSendGuess = () => {\n    sendGuess();\n  };\n\n  // Check if current user is the drawer\n  const isCurrentDrawer = isDrawing;\n\n  useEffect(() => {\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n\n    console.log('GameRoom: Setting up socket connection...');\n\n    // Connect to socket\n    socketManager.connect(token);\n\n    // Register all event listeners\n    socketManager.on('socket_connected', handleSocketConnectedEvent);\n    socketManager.on('authenticated', handleAuthenticatedEvent);\n    socketManager.on('room_joined', handleRoomJoinedEvent);\n    socketManager.on('player_joined', handlePlayerJoinedEvent);\n    socketManager.on('player_left', handlePlayerLeftEvent);\n    socketManager.on('chat_message', handleChatMessageEvent);\n    socketManager.on('game_started', handleGameStartedEvent);\n    socketManager.on('round_started', handleRoundStartedEvent);\n    socketManager.on('correct_guess', handleCorrectGuessEvent);\n    socketManager.on('round_ended', handleRoundEndedEvent);\n    socketManager.on('game_ended', handleGameEndedEvent);\n    socketManager.on('time_update', handleTimeUpdateEvent);\n    socketManager.on('word_assigned', handleWordAssignedEvent);\n    socketManager.on('game_state', handleGameStateEvent);\n    socketManager.on('canvas_cleared', handleCanvasClearedEvent);\n    socketManager.on('draw_data', handleDrawDataEvent);\n    socketManager.on('room_deleted', handleRoomDeletedEvent);\n    socketManager.on('players_update', handlePlayersUpdateEvent);\n\n    // Initial fetch of players\n    const fetchPlayers = async () => {\n      try {\n        const response = await roomsAPI.getRoomPlayers(roomId);\n        if (response.data && response.data.players) {\n          setPlayers(response.data.players);\n        }\n      } catch (err) {\n        console.error('Failed to fetch players:', err);\n      }\n    };\n    fetchPlayers();\n\n    // Cleanup on unmount\n    return () => {\n      socketManager.off('socket_connected', handleSocketConnectedEvent);\n      socketManager.off('authenticated', handleAuthenticatedEvent);\n      socketManager.off('room_joined', handleRoomJoinedEvent);\n      socketManager.off('player_joined', handlePlayerJoinedEvent);\n      socketManager.off('player_left', handlePlayerLeftEvent);\n      socketManager.off('chat_message', handleChatMessageEvent);\n      socketManager.off('game_started', handleGameStartedEvent);\n      socketManager.off('round_started', handleRoundStartedEvent);\n      socketManager.off('correct_guess', handleCorrectGuessEvent);\n      socketManager.off('round_ended', handleRoundEndedEvent);\n      socketManager.off('game_ended', handleGameEndedEvent);\n      socketManager.off('time_update', handleTimeUpdateEvent);\n      socketManager.off('word_assigned', handleWordAssignedEvent);\n      socketManager.off('game_state', handleGameStateEvent);\n      socketManager.off('canvas_cleared', handleCanvasClearedEvent);\n      socketManager.off('draw_data', handleDrawDataEvent);\n      socketManager.off('room_deleted', handleRoomDeletedEvent);\n      socketManager.off('players_update', handlePlayersUpdateEvent);\n    };\n  }, [\n    token,\n    roomId,\n    navigate,\n    joinRoom,\n    setPlayers,\n    handleSocketConnectedEvent,\n    handleAuthenticatedEvent,\n    handleRoomJoinedEvent,\n    handlePlayerJoinedEvent,\n    handlePlayerLeftEvent,\n    handleChatMessageEvent,\n    handleGameStartedEvent,\n    handleRoundStartedEvent,\n    handleCorrectGuessEvent,\n    handleRoundEndedEvent,\n    handleGameEndedEvent,\n    handleTimeUpdateEvent,\n    handleWordAssignedEvent,\n    handleGameStateEvent,\n    handleCanvasClearedEvent,\n    handleDrawDataEvent,\n    handleRoomDeletedEvent,\n    handlePlayersUpdateEvent,\n  ]);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-xl\">Loading room...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-red-500 text-xl\">Error: {error}</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-4\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"bg-white rounded-lg shadow-md p-4 mb-4\">\n          <div className=\"flex justify-between items-center\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-800\">Room {roomId}</h1>\n              <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\n                <span>Players: {players.length}</span>\n                <span>Round: {currentRound}/{totalRounds}</span>\n                {isGameActive && <span>Time: {timeRemaining}s</span>}\n                {isSocketConnected ? (\n                  <span className=\"text-green-500\">‚óè Connected</span>\n                ) : (\n                  <span className=\"text-red-500\">‚óè Disconnected</span>\n                )}\n              </div>\n            </div>\n            <div className=\"flex space-x-2\">\n              {!isGameActive && (\n                <>\n                  <Button\n                    onClick={handleReadyToggle}\n                    variant={isReady ? 'success' : 'secondary'}\n                  >\n                    {isReady ? 'Ready' : 'Not Ready'}\n                  </Button>\n                  <Button onClick={handleStartGame} variant=\"primary\">\n                    Start Game\n                  </Button>\n                </>\n              )}\n              {isGameActive && isCurrentDrawer && (\n                <Button onClick={handleSkipTurn} variant=\"warning\">\n                  Skip Turn\n                </Button>\n              )}\n              <Button onClick={handleLeaveRoom} variant=\"secondary\">\n                Leave Room\n              </Button>\n              <Button onClick={handleDeleteRoom} variant=\"danger\">\n                Delete Room\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-4\">\n          {/* Players Panel */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"bg-white rounded-lg shadow-md p-4\">\n              <h2 className=\"text-lg font-semibold mb-4\">Players</h2>\n              <div className=\"space-y-2\">\n                {players.map((player, index) => (\n                  <div\n                    key={`${player.id}-${index}`}\n                    className=\"flex items-center justify-between p-2 bg-gray-50 rounded\"\n                  >\n                    <div className=\"flex items-center space-x-2\">\n                      <span className=\"font-medium\">{player.username}</span>\n                      {player.ready && (\n                        <span className=\"text-green-500 text-sm\">‚úì</span>\n                      )}\n                    </div>\n                    <span className=\"text-sm text-gray-600\">\n                      {player.score || 0} pts\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* Game Area */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"bg-white rounded-lg shadow-md p-4\">\n              <div className=\"mb-4\">\n                <h2 className=\"text-lg font-semibold mb-2\">Drawing Canvas</h2>\n                {isGameActive && (\n                  <div className=\"text-sm text-gray-600 mb-2\">\n                    {isCurrentDrawer ? (\n                      <span>Your turn to draw! Word: {currentWord}</span>\n                    ) : (\n                      <span>Waiting for drawing... Word: {currentWord}</span>\n                    )}\n                  </div>\n                )}\n              </div>\n              <DrawingCanvas width={800} height={600} />\n            </div>\n          </div>\n\n          {/* Chat Panel */}\n          <div className=\"lg:col-span-1\">\n            <ChatBox\n              messages={chatMessages}\n              onSendMessage={handleSendMessage}\n              guessInput={guessInput}\n              onGuessInputChange={setGuessInput}\n              onSendGuess={handleSendGuess}\n              isGameActive={isGameActive}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GameRoom; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}